
{% import "_dgu_jinja_util.html" as m with context %}

{% macro local_facet_filters() %}
  <div class="datasets">
    <div class="facet-filters">
      <div class="visible-xs visible-sm">
        <a href="#" class="hide-facets">
          <i class="icon-remove-circle icon-4x"></i>
        </a>
      </div>
      <div class="facet-divider"></div>
        {{m.facet_box(
            'Services',
            h.search_facets_unselected(['service']),
            h.search_facets_selected(['service']),
            'No service filters to apply.'
            )}}
      <div class="facet-divider"></div>
        {{m.facet_box(
            'Functions',
            h.search_facets_unselected(['function']),
            h.search_facets_selected(['function']),
            'No function filters to apply.'
        )}}
      <div class="facet-divider"></div>
      {% if request.params.get('parent_publishers','') %}
        {{m.facet_box(
            'Publisher',
            h.search_facets_unselected(['parent_publishers']),
            h.search_facets_selected(['parent_publishers']),
            'No publisher filters to apply.',
            more_button='more-publishers-button'
        )}}
        {% else %}
        {{m.facet_box(
            'Publisher',
            h.search_facets_unselected(['publisher']),
            h.search_facets_selected(['publisher']),
            'No further publisher filters to apply.',
            more_button='more-publishers-button'
        )}}
      {% endif %}
    </div><!-- /facet-filters -->
  </div>
{% endmacro %}
